# Perpetua OAuth Provider Configuration
#
# Scope policy: follow least-privilege. Only request scopes that Perpetua
# actively needs to proxy. Remove or comment out any scope you don't use.
# Users can always override scopes per-connection if the provider supports it.

providers:
  gcal:
    display_name: "Google Calendar"
    base_url: "https://www.googleapis.com/calendar/v3"
    auth_url: "https://accounts.google.com/o/oauth2/v2/auth"
    token_url: "https://oauth2.googleapis.com/token"
    client_id: "${GOOGLE_CLIENT_ID}"
    client_secret: "${GOOGLE_CLIENT_SECRET}"
    scopes:
      - "https://www.googleapis.com/auth/calendar.readonly"  # read-only calendar access
    extra_params:
      access_type: "offline"
      prompt: "consent"
    token_expiry_buffer_seconds: 300

  oura:
    display_name: "Oura Ring"
    base_url: "https://api.ouraring.com"
    auth_url: "https://cloud.ouraring.com/oauth/authorize"
    token_url: "https://api.ouraring.com/oauth/token"
    client_id: "${OURA_CLIENT_ID}"
    client_secret: "${OURA_CLIENT_SECRET}"
    scopes:
      # Each scope grants read access to a specific Oura data category.
      # Remove any you don't need to reduce the access surface.
      - "personal"   # required: profile info for account identification
      - "daily"      # daily activity/readiness/sleep summaries
      - "heartrate"  # continuous heart rate data
      - "workout"    # workout sessions
      - "tag"        # user-created tags
      - "session"    # guided/unguided sessions (breathing, meditation)

  strava:
    display_name: "Strava"
    base_url: "https://www.strava.com/api/v3"
    auth_url: "https://www.strava.com/oauth/authorize"
    token_url: "https://www.strava.com/api/v3/oauth/token"
    client_id: "${STRAVA_CLIENT_ID}"
    client_secret: "${STRAVA_CLIENT_SECRET}"
    scopes:
      - "read"              # required: public profile and activity summaries
      - "activity:read_all" # private activities (remove if only public data needed)
    extra_params:
      approval_prompt: "force"

  notion:
    display_name: "Notion"
    base_url: "https://api.notion.com/v1"
    auth_url: "https://api.notion.com/v1/oauth/authorize"
    token_url: "https://api.notion.com/v1/oauth/token"
    client_id: "${NOTION_CLIENT_ID}"
    client_secret: "${NOTION_CLIENT_SECRET}"
    scopes:
      - "read"  # read-only access to pages/databases the user has shared
    extra_params:
      owner: "user"

  spotify:
    display_name: "Spotify"
    base_url: "https://api.spotify.com/v1"
    auth_url: "https://accounts.spotify.com/authorize"
    token_url: "https://accounts.spotify.com/api/token"
    client_id: "${SPOTIFY_CLIENT_ID}"
    client_secret: "${SPOTIFY_CLIENT_SECRET}"
    scopes:
      - "user-read-private"  # required: account info for identification
      - "user-read-email"    # optional: email for account matching
      - "user-library-read"  # saved tracks/albums/shows
      - "user-top-read"      # top artists and tracks
